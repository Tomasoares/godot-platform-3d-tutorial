[gd_scene load_steps=16 format=3 uid="uid://cjpgqeerjbpx2"]

[ext_resource type="Script" uid="uid://d2c1qmvnixfiu" path="res://Assets/Nodes/Systems/lives_manager.gd" id="1_rrtib"]
[ext_resource type="PackedScene" uid="uid://b14amt1t088u" path="res://Assets/Nodes/Systems/coin_manager.tscn" id="2_q8865"]
[ext_resource type="Script" uid="uid://brw6lssv6saty" path="res://Assets/Nodes/Systems/timer_manager.gd" id="3_oqa20"]
[ext_resource type="PackedScene" uid="uid://dtcumeuqke5t2" path="res://Assets/Nodes/Player/player.tscn" id="4_xqf7m"]
[ext_resource type="PackedScene" uid="uid://s0o1es323d32" path="res://Assets/Nodes/Collectibles/coin.tscn" id="5_xrgol"]
[ext_resource type="PackedScene" uid="uid://dqn51mw7stk6t" path="res://Assets/Nodes/Collectibles/extra_life.tscn" id="6_u65dn"]
[ext_resource type="Environment" uid="uid://ygaqikky4834" path="res://Assets/Resources/world_3_environment.tres" id="7_nya1f"]
[ext_resource type="Script" uid="uid://dnc0khkx7arhc" path="res://Assets/Nodes/Items/fall_zone.gd" id="8_233qj"]
[ext_resource type="MeshLibrary" uid="uid://3om78icouu6v" path="res://Assets/Resources/world-blocks-v3.tres" id="9_ruvfl"]
[ext_resource type="PackedScene" uid="uid://brt7iomeg6l42" path="res://Assets/Nodes/Hud/hud.tscn" id="10_y154b"]
[ext_resource type="PackedScene" uid="uid://cnfbbvb0tuc8o" path="res://Assets/Nodes/Hud/collect_all_coins_intro.tscn" id="11_acssh"]
[ext_resource type="PackedScene" uid="uid://c7q775vp1i4cy" path="res://Assets/Nodes/Hud/pause_menu.tscn" id="12_jy6h8"]
[ext_resource type="PackedScene" uid="uid://df8ky1p113mmd" path="res://Assets/Nodes/Hud/win_screen.tscn" id="13_2sksg"]

[sub_resource type="GDScript" id="GDScript_rka8t"]
script/source = "extends Node3D


# Called when the node enters the scene tree for the first time.
func _ready() -> void:
	SoundManager.play_level_outside()

# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta: float) -> void:
	pass
"

[sub_resource type="BoxShape3D" id="BoxShape3D_rka8t"]

[node name="Level" type="Node3D"]
script = SubResource("GDScript_rka8t")

[node name="Systems" type="Node" parent="."]

[node name="LivesManager" type="Node" parent="Systems" node_paths=PackedStringArray("hud")]
script = ExtResource("1_rrtib")
hud = NodePath("../../UI/HUD")

[node name="CoinManager" parent="Systems" node_paths=PackedStringArray("hud_manager", "win_screen") instance=ExtResource("2_q8865")]
finish_scene = "uid://chb5dubgcryke"
hud_manager = NodePath("../../UI/HUD")
win_screen = NodePath("../../UI/WinScreen")

[node name="TimerManager" type="Node3D" parent="Systems" node_paths=PackedStringArray("hud")]
script = ExtResource("3_oqa20")
hud = NodePath("../../UI/HUD")

[node name="Things" type="Node3D" parent="."]

[node name="Player" parent="Things" node_paths=PackedStringArray("lives_manager") instance=ExtResource("4_xqf7m")]
transform = Transform3D(1.3113416e-07, 0, -1, 0, 1, 0, 1, 0, 1.3113416e-07, -23.874207, 1.7170649, 2.99752)
lives_manager = NodePath("../../Systems/LivesManager")

[node name="Enemies" type="Node3D" parent="Things"]

[node name="Blocks" type="Node3D" parent="Things"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.1764078, 0)

[node name="Coins" type="Node3D" parent="Things"]

[node name="Coin9" parent="Things/Coins" node_paths=PackedStringArray("coin_manager") instance=ExtResource("5_xrgol")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -25.962284, 1.9678516, -5)
coin_manager = NodePath("../../../Systems/CoinManager")

[node name="ExtraLives" type="Node3D" parent="Things"]

[node name="ExtraLife" parent="Things/ExtraLives" node_paths=PackedStringArray("lives_manager") instance=ExtResource("6_u65dn")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -25.89687, 2.445325, 1)
lives_manager = NodePath("../../../Systems/LivesManager")

[node name="Bumps" type="Node3D" parent="Things"]

[node name="Bouncers" type="Node3D" parent="Things"]

[node name="Spikes" type="Node3D" parent="Things"]

[node name="World" type="Node3D" parent="."]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="World"]
transform = Transform3D(0.27009952, -0.95961785, -0.07861142, 0.84422195, 0.19677722, 0.49856606, -0.46296394, -0.20102793, 0.8632799, -17.801836, 4.7057667, 2.768196)
light_energy = 6.909
light_indirect_energy = 16.0
light_volumetric_fog_energy = 0.0
light_specular = 2.02
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="World"]
environment = ExtResource("7_nya1f")

[node name="FallZone" type="Area3D" parent="World" node_paths=PackedStringArray("lives_manager")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -71.13349, 0)
script = ExtResource("8_233qj")
lives_manager = NodePath("../../Systems/LivesManager")

[node name="CollisionShape3D" type="CollisionShape3D" parent="World/FallZone"]
transform = Transform3D(1000, 0, 0, 0, 1, 0, 0, 0, 1000, 0, 0.036364555, 0)
shape = SubResource("BoxShape3D_rka8t")

[node name="GridMap" type="GridMap" parent="World"]
mesh_library = ExtResource("9_ruvfl")
collision_layer = 2
collision_mask = 9

[node name="UI" type="Node2D" parent="."]

[node name="HUD" parent="UI" instance=ExtResource("10_y154b")]

[node name="CollectAllCoinsIntro" parent="UI" instance=ExtResource("11_acssh")]

[node name="PauseMenu" parent="UI" instance=ExtResource("12_jy6h8")]

[node name="WinScreen" parent="UI" node_paths=PackedStringArray("pause_manager", "timer_manager") instance=ExtResource("13_2sksg")]
pause_manager = NodePath("../PauseMenu")
timer_manager = NodePath("../../Systems/TimerManager")

[connection signal="tree_exiting" from="Things/Player" to="." method="_on_player_tree_exiting"]
[connection signal="body_entered" from="World/FallZone" to="World/FallZone" method="_on_body_entered"]
